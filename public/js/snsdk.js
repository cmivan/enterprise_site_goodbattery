(function(){ImportJavscript={url:function(a){document.write('<script type="text/javascript" src="'+a+'"><\/script>')}}})();(function(ai,ad){var af=ai.util.substitute,an=FE.util,O=ai.support,al,aa,Y,S,am,M,L,ah,I,ac={aliDomain:"http://china.alibaba.com",loginchinahttpDomain:"http://loginchina.alibaba.com",loginchinaDomain:"https://loginchina.alibaba.com",alipayDomain:"https://auth.alipay.com",logintaobaoDomain:"https://login.taobao.com",jumptaobaoDomain:"http://jump.taobao.com/jump",cbuRegister:"http://china.alibaba.com/member/join/common_join.htm",alipayNotice:"http://member.china.alibaba.com/member/alipay/notice_for_pop.htm",taobaoLoginPage:"https://login.taobao.com/member/login.jhtml",memberwebAlipayLogin:"http://member.china.alibaba.com/member/alipay/notice.htm",appendTo:"body",dialog:{center:true,fadeIn:300,fadeOut:300}},ab={},ak={checkcode:"{0}/omeocheckcode",getLastLoginType:"{0}/member/GetLastLoginType.do",loginUrl:"{0}/member/PopSignin.do",urlEmail:"{0}/member/CheckEmailJson.htm",urlId:"{0}/member/CheckLoginIdAndRecommendJson.htm",registUrl:"{0}/member/join/commonPopValidateJoin.htm",urlUM:"{0}/member/popSignin.htm",urlMobile:"{0}/member/checkMobileValidate.htm",urlSendM:"{0}/member/sendIdentityCodeByMobile.htm",urlSendE:"{0}/member/sendIdentityCodeByEmail.htm"},R=false,K=true,aj,H,U,ae,T,Q,Z,W,ag,V;function J(a,b){var c=K?"m":"e";window.aliclick&&aliclick(a,af(b,[c]))}al=ad.logist=function(a){if(typeof a==="string"){if(typeof(al[a])==="function"){return al[a]()}}else{ab=ai.extend(true,{},ac);FE.test["style.exodus2.url"]&&al.switchDomain();a&&(a=al.formatDomain(a));ab=ai.extend(true,ab,a);ai.use("web-valid",function(){al._init()})}};ai.extend(ad.logist,{aliclick:J,_init:function(){ai.ajax(af(ak.getLastLoginType,[ab.loginchinahttpDomain]),{dataType:"jsonp",success:function(a){if(a.success){H=a.checkcodetoken;U=a.data||"";R=a.verifyCode;if(H){if(!Q){al._render();al._buildEvent();Q=true}var b=FE.util.lastLoginId?0:1;if(ab.tab){switch(ab.tab){case"login":ai(Y[0]).triggerHandler("click");M.triggerHandler("click");break;case"regist":ai(Y[0]).triggerHandler("click");M.triggerHandler("click");break;case"alipay":ai(Y[0]).triggerHandler("click");S.triggerHandler("click");break;case"taobao":ai(Y[0]).triggerHandler("click");am.triggerHandler("click");break;default:break}}else{ai(Y[0]).triggerHandler("click");M.triggerHandler("click")}ai.use("ui-dialog",function(){var f={},e=ab.dialog.open,d=ab.dialog.close;ai.extend(f,ab.dialog);f.open=function(){Z=true;e&&e();J(null,"?tracelog=layer_simple_open")};f.close=function(){d&&d()};aa.dialog(f)});if(!ai("#umiframe").length){var c=ai('<div id="umiframe" style="display:none;"><iframe width="1" height="1" src="http://china.alibaba.com/member/get_umid.htm"></iframe></div>');ai("body").append(c)}}}}})},_render:function(){aa=ai("<div>",{id:"sys-logist",css:{display:"none"}}).addClass("logist-fdev4").html('<div class="wrap">				<div class="title fd-clr">					<h3><img alt="\u963f\u91cc\u5df4\u5df4" src="http://img.china.alibaba.com/cms/upload/member/logo2.gif" /></h3>					<a href="javascript:;" class="close" tabindex="9000"></a>				</div>				<div class="box">				<ul class="tab" style="display: none;"><li>\u4f1a\u5458\u767b\u5f55</li><li>\u514d\u8d39\u6ce8\u518c</li><li><button type="submit"></button></li></ul>				<fieldset style="display: none;">					<div class="b2btype">						<div id="loginchinatype">                            <iframe width="310" height="270" frameborder="no" border="0" scrolling="no" /> 						</div>						<div class="signin-type">            				<a class="taobao-login-trigger" href="javascript:;">\u6dd8\u5b9d\u4f1a\u5458\u767b\u5f55</a>							<a class="free-regist" target="_blank" href="'+ac.cbuRegister+'">\u514d\u8d39\u6ce8\u518c</a>						</div>		    			<div class="gray-bg-wrapper">		        			<div class="alipay-login-div">		                		<span>\u539f\u4f7f\u7528\u652f\u4ed8\u5b9d\u767b\u5f55\u4f1a\u5458\uff0c</span><a class="alipay-login-trigger" href="javascript:;">\u70b9\u6b64\u8fdb\u5165&gt;</a>		                	</div>		            	</div>					</div>					<div class="alipaytype" style="display:none;">						<div class="alipay-content"><iframe width="370" height="260" scrolling="no" frameborder="0" src="'+ac.alipayNotice+'"></iframe></div>               			<div class="gray-bg-wrapper">	               			<div class="return-cbu-signin" style="width: 370px;">	               				<a href="javascript:;" class="logtype-b2b">&lt;\u8fd4\u56de\u963f\u91cc\u5df4\u5df4\u5e10\u53f7\u767b\u5f55</a>	                       	</div>	                   	</div>					</div>					<div class="taobaotype" style="display:none;">		                <div class="taobao-signin-title">		                    <b>\u6dd8\u5b9d\u4f1a\u5458</b>		                </div>						<div class="taobao-content"><iframe width="310" height="300" scrolling="no" frameborder="0" src="'+al.generateTaobaoLoginUrl()+'"></iframe></div>               			<div class="gray-bg-wrapper">	               			<div class="return-cbu-signin">	               				<a href="javascript:;" class="logtype-b2b">&lt;\u8fd4\u56de\u963f\u91cc\u5df4\u5df4\u5e10\u53f7\u767b\u5f55</a>	                       	</div>	                   	</div>					</div>				</fieldset>				<div class="done" style="display: none;"></div><div class="done" style="display: none;"></div>			</div></div>').appendTo(ab.appendTo||"body")},_buildEvent:function(){var g=ai("input.text",aa);Y=ai("ul.tab>li:lt(2)",aa);L=ai("fieldset",aa);ah=ai("#loginchinatype a.login",aa);I=ai("a.regist",aa);var e=ai("dl.action",aa),i=ai("div.done",aa),d=ai("div.message",aa),b=ai("a.close",aa),f=false,a=false,h=ai("div.b2btype",aa),j=ai("div.alipaytype",aa),c=ai("div.taobaotype",aa);M=ai("a.logtype-b2b",aa);S=ai("a.alipay-login-trigger",h);am=ai(".taobao-login-trigger",h);b.click(function(k){k.preventDefault();al("close")});Y.click(function(k){var l=ai(this);if(l.hasClass("current")){return}var m=Y.index(l),n=ai("input:eq(0)",L[m]);aj=m;Y.removeClass("current");l.addClass("current");i.hide();L.hide();ai([L[m],e[m]||""]).show();if(k.which&&!m){J(null,"?tracelog=signin_simple_tab")}else{if(m===1){J(null,"?tracelog=reg_simple_m_tab1")}}});S.click(function(k){k.preventDefault();h.hide();c.hide();j.show();J(null,"?tracelog=zfbsigin_login_b_login")});M.click(function(k){k.preventDefault();h.show();j.hide();c.hide();J(null,"?tracelog=layer_return1688_20130322")});am.click(function(k){k.preventDefault();h.hide();j.hide();c.show();J(null,"?tracelog=pop_top_tb")});al.initLoginFrame()},initLoginFrame:function(){var a=ai("#loginchinatype iframe",aa);a.one("load",function(){a.on("load",al.checkIfLoginSuccess)});a.attr("src",al.generateB2BLoginUrl())},generateB2BLoginUrl:function(){return(X("style.logindailytaobao.url")||"http://login.taobao.com")+"/member/login.jhtml?from=b2b_pop&style=b2b&full_redirect=false&reg="+encodeURIComponent((X("style.exodus2.url")||"http://china.alibaba.com")+"/member/join/common_join.htm")+"&redirectURL="+encodeURIComponent((X("style.jumpdailytaobao.url")||"http://jump.taobao.com")+"/jump?target="+encodeURIComponent((X("style.loginchinahttp.url")||"http://loginchina.alibaba.com")+"/member/pop_signin_route.htm?from="+encodeURIComponent(location.href)))},checkIfLoginSuccess:function(){if(!Z||aj){return}al._updateLoginInfo({source:["b2b","taobao"]}).always(function(){if(N()){if(ab.onLoginSuccess){ab.onLoginSuccess(ai("div.done")[0],{},{userid:an.LoginId(),ResultSet:{csrf_token:ai("input[name=_csrf_token]").val()}})}}})},_updateLoginInfo:function(a){if("updateLoginInfo" in an){return an.updateLoginInfo(a)}else{var b=new ai.Deferred;b.resolve();return b}},checkIfRegSuccess:function(){if(!Z||!aj){return}al._updateLoginInfo({source:["b2b","taobao"]}).always(function(){if(an.IsLogin()){if(ab.onRegistSuccess){ab.onRegistSuccess(ai("div.done")[1],{},{userid:an.LoginId(),ResultSet:{csrf_token:ai("input[name=_csrf_token]").val()}})}}})},close:function(){Z=false;al.traceClose();aa.dialog("close")},submit:function(){},traceClose:function(){var a={"3":"reg_simple_{0}_close1","4":"reg_simple_{0}_close2","5":"reg_simple_{0}_close3","7":"reg_simple_{0}_close5","8":"reg_simple_{0}_close4","9":"reg_simple_{0}_close6"};J(null,"?tracelog=reg_simple_close")},switchDomain:function(){FE.test["style.loginchina.url"]&&(ab.loginchinaDomain=FE.test["style.loginchina.url"]);FE.test["style.loginchinahttp.url"]&&(ab.loginchinahttpDomain=FE.test["style.loginchinahttp.url"]);FE.test["style.exodus2.url"]&&(ab.aliDomain=FE.test["style.exodus2.url"]);FE.test["style.alipayauth.url"]&&(ab.alipayDomain=FE.test["style.alipayauth.url"]);FE.test["style.logindailytaobao.url"]&&(ab.logintaobaoDomain=FE.test["style.logindailytaobao.url"]);FE.test["style.jumptaobao.url"]&&(ab.jumptaobaoDomain=FE.test["style.jumptaobao.url"])},formatDomain:function(a){a.loginchinaDomain&&(a.loginchinaDomain=al.getDomain(a.loginchinaDomain,"https://"));a.loginchinahttpDomain&&(a.loginchinahttpDomain=al.getDomain(a.loginchinahttpDomain,"http://"));a.aliDomain&&(a.aliDomain=al.getDomain(a.aliDomain,"http://"));return a},getDomain:function(b,a){var c="",d=b.indexOf("http");if(d===0){return b}return a+b},generateAlipayLoginUrl:function(){var c="{0}/login/option.htm?classOption=b2b&center=false&goto={1}",a="{0}/login/alibabacn_trust_login.htm?target={1}",b=ab.alipayDomain;a=af(a,[b,encodeURIComponent(location.toString())]);c=af(c,[b,encodeURIComponent(a)]);return c},generateTaobaoLoginUrl:function(){return ac.taobaoLoginPage+"?style=mini&full_redirect=true&disableQuickLogin=true&from=b2b_tb_pop&redirectURL="+encodeURIComponent("http://loginchina.alibaba.com/member/jump.htm?target="+encodeURIComponent("http://jump.taobao.com/jump?target="+encodeURIComponent(location.href)))},isReady:function(){return Q},isOpen:function(){return Z}});function X(a){return FE.test&&FE.test[a]}function N(){return an.IsLogin()&&!P()}function P(){return !!ai.util.cookie("cn_user",{raw:true})||/:/.test(ai.util.cookie("__cn_logon_id__",{raw:true}))}ai(function(){J(null,"?tracelog=loginreg_"+location.host+location.pathname)})})(jQuery,FE.sys);var JSON;if(!JSON){JSON={}}(function($){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}$.add("util-json")}(jQuery));function aliclick(b,c){var a="http://stat.china.alibaba.com/tracelog/click.html";return baseClick(a,c)}function etcclick(b,c){var a="http://stat.china.alibaba.com/etclistquery.html";return baseClick(a,c)}function eeclick(b,c){var a="http://stat.china.alibaba.com/ee.html";return baseClick(a,c)}function aliclickType(a,b){var d=window.location.href;if(d){var c=d.substring(d.lastIndexOf("/")+1,d.lastIndexOf("."))}aliclick(a,b+"_"+c)}function baseClick(a,c){if(typeof window.dmtrack!="undefined"){dmtrack.clickstat(a,c)}else{var b=new Date();if(document.images){(new Image).src=a+c+"&time="+b.getTime()}}return true}(function(d,c){var b="http://style.china.alibaba.com/app/work/js/main",a="http://style.china.alibaba.com/app/work/css/main";c.SNSDK={};c.SNSDK.curWidget={};c.SNSDK.app_server="http://myhome.china.alibaba.com";c.SNSDK.share_server="http://work.china.alibaba.com";c.SNSDK.evt={domca:"WK-SNSDK-EVT-DOMCACHEADD",domcc:"WK-SNSDK-EVT-DOMCACHECHANGE",dataca:"WK-SNSDK-EVT-DATACACHEADD",datacc:"WK-SNSDK-EVT-DATACACHECHANGE"};c.SNSDK.widget={like:{js:b+"/page/snsdk/like.js",css:a+"/page/snsdk/like-merge.css",loaded:false},share:{js:b+"/page/snsdk/share.js",css:a+"/page/snsdk/share-merge.css",loaded:false}}})(jQuery,window);(function(b,a){a.SNSDK.errorConfig={unLogined:"未登录，请刷新!"}})(jQuery,window);(function(b,a){a.SNSDK.WidgetLikeTemplate={"style-0":'<div class="widget-wrap"><div class="widget-style like-style-0 snsdk-clear"> <a class="s-trigger "  href="javscript:void(0);" title="<%if($data.isDis){ %>取消<% } %><%= $data.title %>"><% if($data.icon){%><img class="s-icon" src="<%= $data.icon%>" alt="icon"/><%}%><span class="s-txt"><% if($data.isDis){ %>取消<% } %><%= $data.title %></span></a><% if($data.show_count){ %><span class="s-counter snsdk-hide">(<em></em>)</span><% } %></div></div> ',"style-1":'<div class="widget-wrap"><div class="widget-style like-style-1 snsdk-clear"> <a class="s-trigger <%if($data.isDis){ %>  s-trigger-dis <% } %>"  href="javscript:void(0);" title="<%= $data.title %>"><em class="s-icon"></em><% if($data.title){ %><span class="s-txt"><%= $data.title %></span><% } %> </a><% if($data.show_count){ %><span class="s-counter snsdk-hide">(<em></em>)</span><% } %></div></div> ',"style-2":'<div class="widget-wrap"><div class="widget-style like-style-2 snsdk-clear"> <a class="s-trigger <%if($data.isDis){ %>  s-trigger-dis <% } %>"  href="javscript:void(0);" title="<%= $data.title %>"><em class="s-icon"></em><% if($data.title){ %><span class="s-txt"><%= $data.title %></span><% } %> </a><% if($data.show_count){ %><span class="s-counter snsdk-hide">(<em></em>)</span><% } %></div></div> ',"style-3":'<div class="widget-wrap"><div class="widget-style like-style-3 snsdk-clear"> <a class="s-trigger <%if($data.isDis){ %>  s-trigger-dis <% } %>"  href="javscript:void(0);" title="<%= $data.title %>"><em class="s-icon"></em><% if($data.title){ %><span class="s-txt"><%= $data.title %></span><% } %> </a><% if($data.show_count){ %><span class="s-counter snsdk-hide">(<em></em>)</span><% } %></div></div> ',"style-4":'<div class="widget-wrap"><div class="widget-style like-style-3 snsdk-clear"> <a class="s-trigger <%if($data.isDis){ %>  s-trigger-dis <% } %>"  href="javscript:void(0);" title="<%= $data.title %>"><em class="s-icon"></em><% if($data.title){ %><span class="s-txt"><%= $data.title %></span><% } %> </a><% if($data.show_count){ %><span class="s-counter snsdk-hide">(<em></em>)</span><% } %></div></div> ',"style-5":'<div class="widget-wrap"><div class="widget-style like-style-5 snsdk-clear"><a class="s-trigger <%if($data.isDis){ %>  s-trigger-dis <% } %> " href="javscript:void(0);"  title="<%= $data.title %>"><em class="s-icon"></em><div class="s-t-container"><% if($data.title){ %><span class="s-txt"><%= $data.title %></span><% } %> <% if($data.show_count){ %><span class="s-counter snsdk-hide">(<em></em>)</span><% } %></div></a></div></div>',"style-6":'<div class="widget-wrap"><div class="widget-style like-style-6 snsdk-clear"><a class="s-trigger <%if($data.isDis){ %>  s-trigger-dis <% } %> " href="javscript:void(0);"  title="<%= $data.title %>"><em class="s-icon"></em><div class="s-t-container"><% if($data.title){ %><span class="s-txt"><%= $data.title %></span><% } %> <% if($data.show_count){ %><span class="s-counter snsdk-hide">(<em></em>)</span><% } %></div></a></div></div>'};a.SNSDK.WidgetShareTemplate={"style-0":'<div class="widget-wrap"><div class="widget-style share-style-0 snsdk-clear"> <a class="s-trigger" href="javscript:void(0);" title="<%= $data.title %>"><% if($data.icon){%><img class="s-icon" src="<%= $data.icon%>" alt="icon"/><%}%><% if($data.title){ %><span class="s-txt"><%= $data.title %></span><% } else{ %> <span class="s-txt">分享到我的阿里</span><%}%></a><% if($data.show_count){ %><span class="s-counter snsdk-hide">(<em></em>)</span><% } %></div></div> ',"style-1":'<div class="widget-wrap"><div class="widget-style share-style-1 snsdk-clear"> <a class="s-trigger" href="javscript:void(0);" title="<%= $data.title %>"><em class="s-icon"></em><% if($data.title){ %><span class="s-txt"><%= $data.title %></span><% } %> </a><% if($data.show_count){ %><span class="s-counter snsdk-hide">(<em></em>)</span><% } %></div></div> ',"style-2":'<div class="widget-wrap"><div class="widget-style share-style-2 snsdk-clear"> <a class="s-trigger" href="javscript:void(0);" title="<%= $data.title %>"><em class="s-icon"></em><% if($data.title){ %><span class="s-txt"><%= $data.title %></span><% } %> </a><% if($data.show_count){ %><span class="s-counter snsdk-hide">(<em></em>)</span><% } %></div></div> ',"style-3":'<div class="widget-wrap"><div class="widget-style share-style-3 snsdk-clear"><a class="s-trigger"  href="javscript:void(0);"  title="<%= $data.title %>"><em class="s-icon"></em><div class="s-t-container"><% if($data.title){ %><span class="s-txt"><%= $data.title %></span><% } %> <% if($data.show_count){ %><span class="s-counter snsdk-hide">(<em></em>)</span><% } %></div></a></div></div>',"style-4":'<div class="widget-wrap"><div class="widget-style share-style-4 snsdk-clear"> <a class="s-trigger" href="javscript:void(0);"  title="<% if($data.title) { $data.title } else { %>分享到我的阿里<% } %>"><em class="s-icon"></em><% if($data.title){ %><span class="s-txt"><%= $data.title %></span><% } %> </a><% if($data.show_count){ %><span class="s-counter snsdk-hide">(<em></em>)</span><% } %></div></div> '}})(jQuery,window);(function(d,b){if(!d){d.log("require Jquery ! dear ");return}var a="";d.use("util-date",function(){a=(new Date()).format("yyyyMMdd")});var c={action:function(j,k){var h="";for(var g in k){for(var f=0,e=k[g].length;f<e;f++){h+="wk-snsdk-"+j;h+="-"+(g||"")+"-"+(k[g][f].key||"")+"-"+a+"-"+(FE.util.LoginId()||"")+"|"}}h&&aliclick(null,"?tracelog="+h)}};b.SNSDK.Tracelog=c})(jQuery,window);(function(e,c){var d=c.SNSDK.curWidget,f=c.SNSDK.evt,b=e(document),a={init:function(g){this.data={};this.dom={};d=g;this.initDomcache();this.initDataCache();this.initEvt()},initEvt:function(){var g=this;b.bind(f.domca,function(i,h){g.addD(h.type,h.key,h.dom)}).bind(f.dataca,function(i,h){if(!g.get(h.type,h.key)){g.set(h.type,h.key,h.data)}})},initDataCache:function(){for(var g in d){if(!this.data[g]){this.data[g]={}}}return this.data},initDomcache:function(){for(var g in d){if(!this.dom[g]){this.dom[g]=[]}}return this.dom},addD:function(h,g,i){if(!this.dom[h]){this.dom[h]={}}if(!this.dom[h][g]){this.dom[h][g]=[]}if(!i[0].isAdd){this.dom[h][g].push(i);i[0].isAdd=true}},getD:function(h,g){return this.dom[h]?this.dom[h][g]:null},setD:function(h,g,i){if(!this.dom[h]){this.dom[h]={}}this.dom[h][g]=i;b.trigger(f.domcc,{key:g,type:h,doms:i})},set:function(i,h,j){var g=true;if(!this.data[i]){this.data[i]={}}if(this.data[i]&&this.data[i][h]){g=false}this.data[i][h]=j;j={key:h,isNew:g,type:i,data:j};b.trigger(f.datacc,j)},get:function(h,g){if(this.data&&this.data[h]&&this.data[h][g]){return this.data[h][g]}return null}};c.SNSDK.dataStore=a})(jQuery,window);(function(g,c){if(!g){g.log("require Jquery ! dear ");return}var e="http://myhome.china.alibaba.com",b={skin_type:"style-1",title:"&nbsp;",action_key:FE.util.LoginId()||"",app_server:e,show_count:true},f=c.SNSDK.Tracelog,d="/feed/snsAction/doAction.jsonp",a="/feed/snsAction/getCount.jsonp",h={$RegxChinaUrl:/http[s]{0,1}:\/\/([a-z0-9\-_]+\.)*(china\.alibaba)\.(com)(\/.*)*$/,checkChinaUrl:function(j){var i=new RegExp(this.$RegxChinaUrl);return j?j.match(i):null},escape:function(i){return i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},unescape:function(i){return i.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'")},encode:function(i){return i.replace(/#/g,"%23").replace(/&/g,"%26")},cut:function(k,i,j){if(!k){return k}if(k&&k.length<=i){return k}k=k.substr(0,i)+(j||"");return k},resizeImage:function(i,l,j){if(!g.isPlainObject(l)){l={width:l,height:l}}if(l.size){l.width=l.height=l.size}j=j||l.defaultImage;if(typeof i==="string"){i=g(i)}i.each(function(){var n=this,o=new Image();o.onload=function(){if(j&&m(this)){n.src=j}else{k(n,l.width,l.height,this,l.force)}o.onload=null;l.success&&l.success()};o.src=n.src});function m(n){return n.width<=1&&n.height<=1}function k(q,o,u,p,n){var t=p.width,r=p.height,s=t*u-r*o>=0,v=s?o:u;if(!t||!r){return}if(s&&(t>v||n)){r=v*r/t;t=v}if(!s&&(r>v||n)){t=v*t/r;r=v}t=Math.round(t);r=Math.round(r);q.width=t;q.height=r;g(q).css({width:t+"px",height:r+"px"})}},getUrlParam:function(i){var j=new RegExp("(^|&)"+i+"=([^&]*)(&|$)");var k=window.location.search.substr(1).match(j);if(k!=null){return decodeURIComponent(k[2])}return null},getSimUrlParam:function(i){var k={};if(iWorkPlaceConfig&&iWorkPlaceConfig.urlParams){try{k=g.parseJSON(iWorkPlaceConfig.urlParams)}catch(j){}finally{return k[i]}}return k[i]}};c.SNSDK.Util=h})(jQuery,window);(function(g,b){if(!g){g.log("require Jquery ! dear ");return}var h={skin_type:"style-1",title:"&nbsp;",action_key:FE.util.LoginId()||"",app_server:b.SNSDK.app_Server,show_count:true},i={},m=b.SNSDK.Tracelog,d="/widget/action/doBatchAction.jsonp?_input_charset=utf-8",e="/widget/action/batchGetCount.jsonp",j="wk-snsdk-widget",l=b.SNSDK.evt,c=b.SNSDK.dataStore,f=g(document),k=b.SNSDK.Util,a={action:function(o,n,p){return g.ajax({url:(n.app_server?n.app_server:b.SNSDK.app_server)+d,dataType:"jsonp",cache:false,data:g.param({param:(JSON.stringify(n.requestData?n.requestData:{}))}),success:function(u){if(!u||!u.success){return}u=u.data;if(u.error_code&&u.error_code=="unLogined"){a.isLogist(null,true)}for(var s in u){if(u[s]){for(var r=0,v=u[s],q=v.length;r<q;r++){c.set(s,v[r].key,v[r].data)}var t=b.SNSDK[s+"Widget"];if(t&&g.isFunction(t.refresh)){t.refresh(u[s],n.requestData[s])}}}},error:function(q){}})},render:function(o,p){var n=this;g.use("web-sweet",function(){var q=FE.util.sweet(o.template);if(g.type(o.selector)=="string"){o.selector=g(o.selector)}if(o.selector[0]){if((o.selector.html()).trim()===""){o.selector.html(q.applyData(o));g("span.s-counter em",o.selector).html(o.data&&o.data.count?o.data.count:0);g("span.s-counter",o.selector).show()}if(p){g.isFunction(p.func)&&p.func.call(p.scope||window,p.param)}}})},getCid:function(o){if(!o[0]){return""}var p="",n=new String(o[0].className).split(" ");g.each(n,function(q,u){var s=new RegExp(".*wk-snsdk-(.*)");var t=n[q].match(s);if(t&&t[1]!=null&&t[1]!="widget"){p=decodeURIComponent(t[1])}});return p},getAllCids:function(){var n=this,p={},o=g("."+j);if(!o.length){g.log("[ info ] "+j+" doms is not exist~~");return}g.each(o,function(q,s){var r=n.getCid(g(this));if(!p[r]){p[r]={}}});return p},loadCSS:function(q,p){if(!g.isArray){q=[q]}var n="?",o="";g.each(q,function(s,v){o=q[s];if(o.indexOf(n)!=-1){n="&"}var t=document.createElement("link"),u=false,w=null,r=null;o+=(n+"t="+g.now());t.type="text/css";t.rel="stylesheet";t.href=o;r=document.createElement("img");w=setTimeout(function(){u=true;g.log("[ warn ] load snsdkwidget css timeout "+o);t.remove()},10000);r.onerror=function(){if(u){return}clearTimeout(w);g.log("[ info ] load snsdkwidget css success "+o);if(g.isFunction(p.success)){p.success.call(p.scope,p)}};g("head:first").append(t);setTimeout(function(){r.src=o},100)})},loadJS:function(q,p){if(!g.isArray(q)){q=[q]}var o=new g.Deferred(),s,n=q.length;r();function r(){var t=q.shift(),u=new g.Deferred();g.ajax({url:t,dataType:"script",cache:false,success:function(){u.resolve()},error:function(){u.resolve()}});u.done(function(v){if(q.length){r()}else{o.resolve()}})}return o},getPageDesc:function(){var o=g("h1,h2,h3"),n="";g.each(o,function(p,q){if(g(this).html().trim()!==""){n=g(this).text().trim();return false}});if(!n){n=document.title}return n},getPagePic:function(){var r=g("img[data-snsdk-share]").length>0?g("img[data-snsdk-share]"):g("img"),o=r.length,n=o>5?5:o,t=0,p=[],q={};for(;t<n;t++){var s=parseInt(Math.random()*o);curImg=r.eq(s);if(!q[s]&&curImg.attr("src")&&(curImg.width()>100||curImg.height()>100)){q[s]=curImg.attr("src");p.push(q[s])}}return p.join(",")},register:function(p,o){var n=o;if(!p){return}if(!n||!g.isFunction(p[n])){n="init"}g(function(){g.isFunction(p[n])&&p[n]()})},isLogist:function(p,n){var o=window.location.href;p=p||{};if((k.checkChinaUrl(o)&&!FE.util.LoginId())||n){FE.sys.logist({source:"worksnsdk",aliDomain:"http://china.alibaba.com",loginchinaDomain:"http://loginchina.alibaba.com",loginchinahttpDomain:"http://loginchina.alibaba.com",imgDomain:"http://checkcode.china.alibaba.com",tab:p.tabShow||"login",onLoginSuccess:function(q,s,r){FE.sys.logist("close");window.location.reload()},onRegistSuccess:function(q,s,r){FE.sys.logist("close");window.location.reload()}})}else{if(p&&g.isFunction(p.callback)){p.callback.call(p.scope||window,p.config)}}},getStatus:function(o){setTimeout(function(){m&&m.action("exp",o)},1000);var q=function(s){if(!s){return}var t=s.data;if(!t){return}for(var r in t){n(r,t[r])}};p(o,q);function n(t,u){for(var s=0,r=u.length;s<r;s++){f.trigger(l.dataca,{key:u[s].key,type:t,data:u[s].data})}}function p(u,t){var s=(u.app_server?u.app_server:b.SNSDK.app_server)+e,r=u.selector;if(r&&typeof r==="string"){r=g(r)}if(r&&(r.html().trim())!==""){if(g.isFunction(t)){t(u)}return}return g.ajax({url:s,dataType:"jsonp",data:g.param({param:(JSON.stringify(u))}),success:function(v){v=g.extend({},u,v);if(g.isFunction(t)){t(v)}},error:function(){if(g.isFunction(t)){t(u)}}})}},initEvt:function(s){var q=s.config,p=q.delegator,n=q.selector,r="",o="click";if(typeof p=="string"){p=g(p);r=n}if(!p||!p[0]){p=g(n);r=""}if(p&&p[0]){if(p.data("events")&&p.data("events")[o]){return}p.delegate(r+" a.s-trigger",o,function(u){u.preventDefault();g.isFunction(s.func)&&s.func.call(s.scope||window,g(this),q);var t={};t[q.action_type]=[];t[q.action_type].push({key:q.key});m&&m.action("click",t)})}},setServer:function(n){if(!n){return}if(!i.app_server&&n.app_server){b.SNSDK.app_server=i.app_server=n.app_server}if(!i.share_server&&n.share_server){b.SNSDK.share_server=i.share_server=n.share_server}}};b.SNSDK.HandlerUtil=a})(jQuery,window);(function(d,b){if(!d){d.log("require Jquery ! dear ");return}var f=b.SNSDK.Util,a=b.SNSDK.HandlerUtil,c=b.SNSDK.widget,e={action:function(j,i){var h=this;if(!c[j]){return}a.loadCSS(c[j].css,{success:function(){g(c[j].js,i)}});function g(l,k){d.ajax({url:l,dataType:"script",cache:false,success:function(){c[j].loaded=true;k.widgetType=j;d.isFunction(k.cal)&&k.cal(k)}})}}};b.SNSDK.Route=e})(jQuery,window);(function(g,b){if(!g){g.log("require Jquery ! dear ");return}var o="wk-snsdk-",k=o+"widget",l=b.SNSDK.Util,c=b.SNSDK.HandlerUtil,h=b.SNSDK.Route,d=b.SNSDK.dataStore,n=b.SNSDK.evt,j=b.SNSDK.widget,m=b.SNSDK.Tracelog,f=g(document),e=8,a=FE.util.LoginId()||"",i={init:function(){var p=this,r=c.getAllCids(),q=p._res(r,"css"),s=p._res(r,"js");d.init(r);p._load({css:q,js:s},function(){p._evt();p._dataEvt()})},_res:function(r,s){var p=[];for(var q in r){p.push(j[q][s])}return p},_load:function(q,r){c.loadCSS(q.css,{success:function(){}});if(q.js){var p=c.loadJS(q.js);p.done(function(){g.isFunction(r)&&r()})}else{g.isFunction(r)&&r()}},_evt:function(){var x=[],t={},v=0,q,p,w,s,q,z=g("div."+k+"[data-config]"),y=z.length;z.each(function(A,B){p=g(this).data("config");if(!p){return}c.setServer(p);w=c.getCid(g(this));s=b.SNSDK[w+"Widget"];if(!t[w]){t[w]=[]}q=(s&&s.param)?s.param(p):{key:p.key||"",action_key:p.action_key||a,action_type:w||""};t[w].push(q);f.trigger(n.domca,{key:p.key||"",type:w,dom:g(this)});if((y-1)===A||(A!=0&&(A%(e-1)===0))){x.push(t);t={}}});for(var r=0,u=x.length;r<u;r++){c.getStatus(x[r])}},_dataEvt:function(){f.bind(n.datacc,function(t,s){var p=d.getD(s.type,s.key),r=null,q=s.isNew?"render":"refresh";p&&g.each(p,function(u,v){r=b.SNSDK[s.type+"Widget"];if(r&&g.isFunction(r[q])){s=g.extend({},s,g(this).data("config"));r[q](g(this),s)}})})},ui:function(s,r){if(!s){g.log("[ SNSDK ] widget {"+s+"} is need");return}if(!r.selector||!r.selector[0]){g.log("[SNSDK] ui selector is null!");return}var u=b.SNSDK[s+"Widget"],t={},v={},q=r.selector.data("config")||{};if(g.type(r.selector)==="string"){r.selector=g(r.selector)}r.dom=r.selector;r.type=s;r=g.extend({},q,r);r.selector.data("config",r);var p=this;v[s]=[{key:r.key,action_type:s,action_key:r.action_key}];if(u){f.trigger(n.domca,r);c.getStatus(v)}else{t[s]={};this._load({css:this._res(t,"css"),js:this._res(t,"js")},function(){u=b.SNSDK[s+"Widget"];f.trigger(n.domca,r);c.getStatus(v)})}},action:function(q){q=p(q);c.action(null,{requestData:q});function p(s){var v=null;for(var u in s){v=b.SNSDK[u+"Widget"];if(v&&v.defaultConfig){for(var t=0,r=s[u].length;t<r;t++){s[u][t]=g.extend({},v.defaultConfig,s[u][t])}}}return s}}};if(!b.SNSDK){b.SNSDK={}}b.SNSDK.ui=function(q,p){i.ui(q,p)};b.SNSDK.action=function(p){i.action(p)};b.SNSDK.HandlerUtil.register(i)})(jQuery,window);